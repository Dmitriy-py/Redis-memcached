# Домашнее задание к занятию «Кеширование Redis/memcached»
## ` Дмитрий Климов `

## Задание 1. Кеширование

Приведите примеры проблем, которые может решить кеширование.

## Ответ: 

### 1. Снижение нагрузки на базы данных:

Проблема: Чтение данных из базы данных - ресурсоемкая операция. Если одни и те же данные запрашиваются многократно, это приводит к увеличению нагрузки на БД, снижению скорости отклика и потенциальным проблемам масштабируемости.
Решение: Кеширование результатов запросов в памяти (например, с использованием Redis, Memcached) позволяет отдавать данные клиентам из кэша, минуя базу данных. Это снижает количество запросов к БД, уменьшает нагрузку на сервер баз данных и ускоряет получение данных.

### 2. Ускорение загрузки веб-страниц и приложений:

Проблема: Генерация динамического контента веб-сайтов, особенно сложного и требующего доступа к множеству ресурсов (изображения, стили, скрипты), может занимать значительное время.
Решение: Кеширование статичного контента (изображения, CSS, JavaScript) в браузере пользователя (кеш браузера) или на сервере (кеш CDN) позволяет значительно ускорить загрузку страниц. Кеширование динамического контента (например, результатов работы API) на сервере также уменьшает время ответа.

### 3. Улучшение отзывчивости API и микросервисов:

Проблема: API и микросервисы могут выполнять сложные вычисления или обращаться к внешним ресурсам (другим сервисам, базам данных). Это замедляет скорость ответа.
Решение: Кеширование результатов вычислений или данных, полученных от внешних ресурсов, позволяет быстро возвращать ответы клиентам из кэша, не тратя время на повторные операции.

### 4. Уменьшение задержек в сетевых приложениях (CDN и DNS):

Проблема: Задержки при получении данных из удаленного источника могут ухудшить пользовательский опыт.
Решение:
CDN (Content Delivery Network): Кеширование статического контента (изображений, видео, скриптов) на серверах, расположенных по всему миру, позволяет отдавать контент пользователям с ближайшего сервера, уменьшая задержки.
DNS (Domain Name System): Кеширование DNS-записей на локальных DNS-серверах позволяет быстро преобразовывать доменные имена в IP-адреса, снижая задержки при доступе к сайтам.

### 5. Снижение нагрузки на ресурсы при обработке повторяющихся задач:

Проблема: При выполнении сложных вычислений или обработке больших объемов данных, многократно повторяющиеся задачи могут значительно увеличить нагрузку на систему.
Решение: Кеширование результатов этих повторяющихся задач позволяет избежать их повторного выполнения, уменьшая потребление ресурсов (CPU, память, дисковое пространство) и ускоряя работу системы. Примером может служить кеширование результатов дорогостоящих функций.

### 6. Оптимизация доступа к данным в распределенных системах:

Проблема: Доступ к данным в распределенных системах (например, NoSQL базам данных) может быть медленным, если данные находятся на удаленных серверах.
Решение: Кеширование данных в локальных или близких к клиенту узлах позволяет ускорить доступ к данным, уменьшить задержки и повысить общую производительность системы.
В заключение:

Кеширование – это мощный инструмент, который помогает решать широкий спектр проблем, связанных с производительностью, масштабируемостью и доступностью приложений и систем. Оно позволяет оптимизировать использование ресурсов, снизить нагрузку на различные компоненты, ускорить время отклика и улучшить пользовательский опыт. При правильном применении, кеширование может значительно улучшить работу практически любого приложения.

## Задание 2. Memcached

### Установите и запустите memcached.

Приведите скриншот systemctl status memcached, где будет видно, что memcached запущен.

## Ответ:

![Снимок экрана (1092)](https://github.com/user-attachments/assets/50cfcec7-eab5-4b28-94d5-b0b89b280265)

## Задание 3. Удаление по TTL в Memcached

### Запишите в memcached несколько ключей с любыми именами и значениями, для которых выставлен TTL 5.

Приведите скриншот, на котором видно, что спустя 5 секунд ключи удалились из базы.

```

rom pymemcache.client.base import Client
import time

# Подключение к Memcached
client = Client(('127.0.0.1', 11211)) # Адрес и порт Memcached по умолчанию

# Установка ключей с TTL = 5 секунд
client.set('key1', 'value1', expire=5)
client.set('key2', 'value2', expire=5)
client.set('key3', 'value3', expire=5)

print("Ключи установлены. Ждем 6 секунд...")
time.sleep(6) # Ждем немного больше, чем TTL

# Проверка наличия ключей
value1 = client.get('key1')
value2 = client.get('key2')
value3 = client.get('key3')

print(f"Значение key1: {value1}")
print(f"Значение key2: {value2}")
print(f"Значение key3: {value3}")

if value1 is None and value2 is None and value3 is None:
    print("Все ключи были удалены по TTL.")
else:
    print("Что-то пошло не так. Не все ключи удалены.")

client.close()


```

![Снимок экрана (1094)](https://github.com/user-attachments/assets/49184065-8c91-42ae-bca6-2e6c48de934b)

## Задание 4. Запись данных в Redis

### Запишите в Redis несколько ключей с любыми именами и значениями.

Через redis-cli достаньте все записанные ключи и значения из базы, приведите скриншот этой операции.

![Снимок экрана (1100)](https://github.com/user-attachments/assets/80338713-37c0-463e-a551-3fb147f0d3bd)

![Снимок экрана (1101)](https://github.com/user-attachments/assets/3cc3c0e9-2633-429f-8088-a9eabfcd6dea)


## Задание 5*. Работа с числами

## Запишите в Redis ключ key5 со значением типа "int" равным числу 5. Увеличьте его на 5, чтобы в итоге в значении лежало число 10.

Приведите скриншот, где будут проделаны все операции и будет видно, что значение key5 стало равно 10.

## Ответ:

```
import redis

# Подключение к Redis (укажите свои параметры, если необходимо)
redis_client = redis.Redis(host='localhost', port=6379, db=0)

# Запись ключа key5 со значением 5
redis_client.set('key5', 5)

# Увеличение значения ключа key5 на 5
redis_client.incr('key5', 5)

# Получение текущего значения ключа key5 (для проверки)
current_value = redis_client.get('key5')

print(f"Текущее значение ключа key5: {current_value}")

```

![Снимок экрана (1102)](https://github.com/user-attachments/assets/c820b008-563a-41eb-be2b-3559a380bd30)

![Снимок экрана (1103)](https://github.com/user-attachments/assets/524b3bda-5f91-4647-afd2-53950bc22123)
